//
// Config
//

// The base font size (used for body text, and to calculate other sizing)
$base-size: 16px;

// The base line height (1.5 times the base font size usually works)
$base-line-height: $base-size * 1.5;

// The ratio by which we will scale sizing by
$scale-ratio: 1.2;

// A line-height grid (useful for design/development, comment to disable)
body {
  $grid-colour-1: rgba(0, 170, 255, 0.3);
  $grid-colour-2: rgba(0, 170, 255, 0.15);
  // background-image: linear-gradient(to bottom, $grid-colour-1 1px, transparent 1px);
  background-image: linear-gradient(to bottom, $grid-colour-1 1px, transparent 1px, transparent ($base-line-height / 2), $grid-colour-2 ($base-line-height / 2), transparent (round($base-line-height / 2) + 2), transparent $base-line-height);
  background-position: left top;
  background-repeat: repeat;
  background-size: 100% $base-line-height;
}

//
// Functions
//

// A power function (multiply a number by itself n amount of times)

@function pow($number, $exponent) {
  $value: 1;

  @if $exponent > 0 {
    @for $i from 1 through $exponent {
      $value: $value * $number;
    }
  }

  @return $value;
}

//
// Styling
//

// Default global style rules for block level elements
h1, h2, h3, h4, h5, h6, blockquote, dd, dl, dt, figcaption, figure, li, ol, p, ul {
  font-size: $base-size;
  line-height: $base-line-height;
  margin: $base-line-height 0;
}

// Headings (this styles headings 1 through 6)
@for $i from 1 through 6 {
  h#{$i} {

    // Calculate the correct font size (as a variable first, so it can be reused later)
    $size: round($base-size * pow($scale-ratio, abs($i - 7)));
    font-size: $size;

    // Calculate line height to the nearest multiple of HALF our base line height (elements can
    // still fit our grid, but we won't have to deal with bad looking small font size/high line
    // height combos (Again, a variable so we can reuse it later)
    $line-height: round(ceil($size / ($base-line-height / 2)) * ($base-line-height / 2));
    line-height: $line-height;

    // Headings should have more white space above them than below, remember the Gestalt principle
    // of proximity
    margin: $base-line-height * 3 0 $base-line-height * 1 0;
  }
}
